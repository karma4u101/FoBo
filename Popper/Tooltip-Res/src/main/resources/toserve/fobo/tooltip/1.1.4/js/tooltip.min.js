import Popper from'popper.js';function isFunction(a){return a&&'[object Function]'==={}.toString.call(a)}var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a};const DEFAULT_OPTIONS={container:!1,delay:0,html:!1,placement:'top',title:'',template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',offset:0};class Tooltip{constructor(a,b){_initialiseProps.call(this),b=_extends({},DEFAULT_OPTIONS,b),a.jquery&&(a=a[0]),this.reference=a,this.options=b;const c='string'==typeof b.trigger?b.trigger.split(' ').filter((d)=>-1!==['click','hover','focus'].indexOf(d)):[];this._isOpen=!1,this._setEventListeners(a,c,b)}_create(a,b,c,d){const e=window.document.createElement('div');e.innerHTML=b.trim();const f=e.childNodes[0];f.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,f.setAttribute('aria-hidden','false');const g=e.querySelector(this.innerSelector);if(1===c.nodeType)d&&g.appendChild(c);else if(isFunction(c)){const h=c.call(a);d?g.innerHTML=h:g.innerText=h}else d?g.innerHTML=c:g.innerText=c;return f}_show(a,b){if(this._isOpen)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.display='',this._tooltipNode.setAttribute('aria-hidden','false'),this.popperInstance.update(),this;const c=a.getAttribute('title')||b.title;if(!c)return this;const d=this._create(a,b.template,c,b.html);d.setAttribute('aria-describedby',d.id);const e=this._findContainer(b.container,a);this._append(d,e);const f={placement:b.placement,modifiers:{arrow:{element:this.arrowSelector}}};return b.boundariesElement&&(f.modifiers.preventOverflow={boundariesElement:b.boundariesElement}),this.popperInstance=new Popper(a,d,f),this._tooltipNode=d,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.display='none',this._tooltipNode.setAttribute('aria-hidden','true'),this):this}_dispose(){return this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this._events.forEach(({func:a,event:b})=>{this.reference.removeEventListener(b,a)}),this._events=[],this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null),this}_findContainer(a,b){return'string'==typeof a?a=window.document.querySelector(a):!1===a&&(a=b.parentNode),a}_append(a,b){b.appendChild(a)}_setEventListeners(a,b,c){const d=[],e=[];b.forEach((f)=>{switch(f){case'hover':d.push('mouseenter'),e.push('mouseleave');case'focus':d.push('focus'),e.push('blur');case'click':d.push('click'),e.push('click');}}),d.forEach((f)=>{const g=(h)=>{!0===this._isOpen||(h.usedByTooltip=!0,this._scheduleShow(a,c.delay,c,h))};this._events.push({event:f,func:g}),a.addEventListener(f,g)}),e.forEach((f)=>{const g=(h)=>{!0===h.usedByTooltip||this._scheduleHide(a,c.delay,c,h)};this._events.push({event:f,func:g}),a.addEventListener(f,g)})}_scheduleShow(a,b,c){const d=b&&b.show||b||0;window.setTimeout(()=>this._show(a,c),d)}_scheduleHide(a,b,c,d){const e=b&&b.hide||b||0;window.setTimeout(()=>{if(!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if('mouseleave'===d.type){const f=this._setTooltipNodeEvent(d,a,b,c);if(f)return}this._hide(a,c)}},e)}}var _initialiseProps=function(){this.show=()=>this._show(this.reference,this.options),this.hide=()=>this._hide(),this.dispose=()=>this._dispose(),this.toggle=()=>{return this._isOpen?this.hide():this.show()},this.arrowSelector='.tooltip-arrow, .tooltip__arrow',this.innerSelector='.tooltip-inner, .tooltip__inner',this._events=[],this._setTooltipNodeEvent=(a,b,c,d)=>{const e=a.relatedreference||a.toElement,f=(g)=>{const h=g.relatedreference||g.toElement;this._tooltipNode.removeEventListener(a.type,f),b.contains(h)||this._scheduleHide(b,d.delay,d,g)};return!!this._tooltipNode.contains(e)&&(this._tooltipNode.addEventListener(a.type,f),!0)}};export default Tooltip;

//# sourceMappingURL=tooltip.min.js.map